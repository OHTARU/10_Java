import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class Todo implements Serializable {
	private static final long serialVersionUID = 1L;
	private int key;
	private transient LocalDateTime localDateTime;
	private String title;
	private String comment;
	private boolean check;
	private String star;

	private String localDateTimeString;
	private static final DateTimeFormatter formatter = DateTimeFormatter.ISO_LOCAL_DATE_TIME;

	Todo(LocalDateTime localDateTime, String title, String comment, String star) {
		this.localDateTimeString = localDateTime.format(formatter);
		this.title = title;
		this.comment = comment;
		this.star = star;
	}

	@Override
	public String toString() {
		return "번호 : " + getKey() + "\n날짜 : " + getLocalDateTime() + "\n제목 : " + getTitle() + "\n내용 : " + getComment()
				+ "\n실행 유무 : " + isCheck() + "\n중요도 : " + getStar();
	}

	public int getKey() {
		return key;
	}

	public void setKey(int key) {
		this.key = key;
	}

	public LocalDateTime getLocalDateTime() {
		return LocalDateTime.parse(localDateTimeString, formatter);
	}

	// public void setLocalDateTime(LocalDateTime localDateTime) {
	// this.localDateTime = localDateTime;
	// this.localDateTimeString = localDateTime.format(formatter);
	// }

	public String getTitle() {
		return title;
	}

	public void setTitle(String title) {
		this.title = title;
	}

	public String getComment() {
		return comment;
	}

	public void setComment(String comment) {
		this.comment = comment;
	}

	public boolean isCheck() {
		return check;
	}

	public void setCheck(boolean check) {
		this.check = check;
	}

	public String getStar() {
		return star;
	}

	public void setStar(String star) {
		this.star = star;
	}

	private void writeObject(ObjectOutputStream out) throws IOException {
		out.defaultWriteObject();
		out.writeUTF(localDateTimeString);
	}

	private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
		in.defaultReadObject();
		localDateTimeString = in.readUTF();
		localDateTime = LocalDateTime.parse(localDateTimeString, formatter); // LocalDateTime으로 변환
	}
}
